<app-header>
  <div class="report-header">
    <div class="left">
      <span class="title">
        Mentorship Report
      </span>
      <span class="dropdown">
        <md-select class="timePicker" placeholder="All Locations" (change)="reloadReport($event)">
          <md-option value="{{ location }}" *ngFor="let location of getDropdownOptions('locations')">{{ location
            }}</md-option>
        </md-select>
        <md-select class="period" placeholder="All time" (change)="reloadReport($event)">
          <md-option value="{{ period }}" *ngFor="let period of getDropdownOptions('periods')">{{ period
            }}</md-option>
        </md-select>
      </span>
    </div>
    <div class="right">
      <span class="download">Download Report <md-icon>get_app</md-icon></span>
    </div>
  </div>
  <div class="report-body">
    <div class="main">
      <md-card *ngIf="loading" class="spinner">
        <md-spinner></md-spinner>
      </md-card>
      <md-card *ngIf="!loading">
        <md-card-content *ngIf="!skills.length">
          No requests made within this period
        </md-card-content>
        <md-card-content *ngIf="skills.length">
          <div *ngFor="let skill of skills" class="skill-row">
              <div class="skill-name">{{ skill.name }}</div>
              <div class="skill-progress">
                <md-progress-bar
                  class="progress-bar mat-progress-bar-buffer"
                  [mode]="mode"
                  value="{{ getPercentage(skill.count) }}">
                </md-progress-bar>
              </div>
              <div class="skill-percent">{{ getPercentage(skill.count) | number: '1.1-1' }}%</div>
          </div>
        </md-card-content>
      </md-card>
    </div>
    <div class="side-info">
      <md-card>
        <md-card-content>
          <span class="title">Requests Made</span>
          <span class="content">
            {{ totalRequests }}
          </span>
        </md-card-content>
      </md-card>
      <md-card>
        <md-card-content>
          <span class="title">Matches</span>
          <span class="content">
            {{ totalRequestsMatched }} / {{ totalRequests }}
          </span>
        </md-card-content>
      </md-card>
      <md-card>
        <md-card-content>
          <span class="title">Sessions Completed</span>
          <span class="content">
            {{ sessionsCompleted }}
          </span>
        </md-card-content>
      </md-card>
      <md-card>
        <md-card-content>
          <span class="title">Atm</span>
          <span class="content">
            {{ atm }}
          </span>
        </md-card-content>
      </md-card>
    </div>
  </div>
</app-header>
